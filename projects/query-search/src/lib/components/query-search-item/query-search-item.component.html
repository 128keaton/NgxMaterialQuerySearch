<div class="query-search-item-wrapper">
  <mat-divider class="notate-group vert-notate-group" [vertical]="true"></mat-divider>
  <mat-divider class="notate-group-after"></mat-divider>

  <button mat-icon-button class="flag-button" [class.flag-enabled]="item.active" [class.flag-disabled]="!item.active"
          (click)="item.active = !item.active" [matTooltip]="flagTooltip" matTooltipPosition="left">
    <mat-icon>{{flagType}}</mat-icon>
  </button>

  <mat-divider class="separate-button between-order-delete"></mat-divider>

  <button mat-icon-button color="warn" class="delete-button" (click)="remove()" [disabled]="disableDelete">
    <mat-icon>delete</mat-icon>
  </button>

  <mat-divider class="separate-button" [class.pad-dividers]="padDividers"></mat-divider>

  <name-field [(selectedField)]="selectedField" (selectedFieldChange)="fieldSelected($event)"></name-field>

  <operator-field *ngIf="showOperatorField" [item]="item"
                  (operatorSelected)="operatorSelected($event)"></operator-field>

  <ng-container *ngIf="showValueField">
    <mat-divider class="separate-fields" [class.between-date-separator]="isBetweenDate"
                 [class.pad-dividers]="padDividers"></mat-divider>
    <ng-container *ngIf="!isDate">
      <plain-value-field [item]="item" [isNumber]="isNumber" *ngIf="!hasValues"></plain-value-field>

      <autocomplete-field [item]="item" [selectedField]="selectedField" *ngIf="hasValues"
                          [operator]="operatorUpdated|async"></autocomplete-field>
    </ng-container>
  </ng-container>
</div>

<ng-container *ngIf="showValueField">
  <double-date-field *ngIf="isBetweenDate" [(item)]="item" [(showBetweenDateFields)]="showBetweenDateFields"
                     [(doubleHeight)]="doubleHeight" [isBetweenDate]="isBetweenDate"></double-date-field>

  <single-date-field *ngIf="isDate && !isBetweenDate" [(item)]="item"></single-date-field>
</ng-container>
